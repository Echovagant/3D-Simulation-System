<!-- eslint-disable vue/multi-word-component-names -->

<template>
  <div class="overview-container">
    <!-- é¡µé¢æ ‡é¢˜åŒºåŸŸ -->
    <div class="header-section">
      <h1 class="title">3Dä»¿çœŸç³»ç»Ÿ</h1>
      <p class="subtitle">é«˜æ•ˆÂ·ç²¾å‡†Â·å¯è§†åŒ–çš„ä»¿çœŸè§£å†³æ–¹æ¡ˆ</p>
    </div>
    <div style="text-align: center; margin-bottom: 20px !important;">
      <button class="quick-know-btn" @click="handleScrollDown">å¿«é€Ÿäº†è§£</button>
    </div>


    <!-- 3Dæ—‹è½¬æ ‡ç­¾äº‘ - å±•ç¤ºæ ¸å¿ƒæŠ€æœ¯å’Œç‰¹æ€§ -->
    <div class="tag-cloud-container">
      <div class="tag-cloud">
        <div
          class="tag"
          :style="{ transform: `rotateY(${i * (360 / tags.length)}deg) translateZ(200px)` }"
          v-for="(tag, i) in tags"
          :key="i"
        >
          {{ tag }}
        </div>
      </div>
    </div>

    <!-- æ ¸å¿ƒç‰¹æ€§ -->
    <div class="features-section">
      <h2 class="section-title">æ ¸å¿ƒç‰¹æ€§</h2>
      <div class="features-grid">
        <div class="feature-item">
          <span class="icon">ğŸŒ</span>
          <div class="feature-content">
            <h3>ä¸‰ç»´åœºæ™¯å®æ—¶æ¸²æŸ“</h3>
            <p>é«˜æ€§èƒ½æ¸²æŸ“å¼•æ“ï¼Œæ”¯æŒå¤æ‚åœºæ™¯å®æ—¶ç»˜åˆ¶ä¸äº¤äº’</p>
          </div>
        </div>
        <div class="feature-item">
          <span class="icon">âš›ï¸</span>
          <div class="feature-content">
            <h3>ç‰©ç†å¼•æ“ç²¾å‡†æ¨¡æ‹Ÿ</h3>
            <p>çœŸå®çš„ç‰©ç†ç¢°æ’ã€é‡åŠ›å’ŒåŠ¨åŠ›å­¦æ•ˆæœæ¨¡æ‹Ÿ</p>
          </div>
        </div>
        <div class="feature-item">
          <span class="icon">ğŸ¤–</span>
          <div class="feature-content">
            <h3>AIæ™ºèƒ½äº¤äº’æ§åˆ¶</h3>
            <p>äººå·¥æ™ºèƒ½é©±åŠ¨çš„åœºæ™¯å…ƒç´ è¡Œä¸ºä¸å†³ç­–ç³»ç»Ÿ</p>
          </div>
        </div>
        <div class="feature-item">
          <span class="icon">ğŸ“±</span>
          <div class="feature-content">
            <h3>å¤šç»ˆç«¯é€‚é…å…¼å®¹</h3>
            <p>å®Œç¾æ”¯æŒæ¡Œé¢ç«¯ã€å¹³æ¿å’Œç§»åŠ¨è®¾å¤‡çš„äº¤äº’ä½“éªŒ</p>
          </div>
        </div>
      </div>
    </div>

    <!-- åŠŸèƒ½å¿«æ·å…¥å£ -->
    <div class="quick-access-section">
      <h2 class="section-title">å¿«é€Ÿå¯¼èˆª</h2>
      <div class="access-grid">
        <RouterLink to="/scene-editor" class="access-card">
          <div class="access-icon">ğŸ› ï¸</div>
          <h3>åœºæ™¯ç¼–è¾‘å™¨</h3>
          <p>åˆ›å»ºå’Œå®šåˆ¶3Dè™šæ‹Ÿç¯å¢ƒ</p>
        </RouterLink>
        <RouterLink to="/simulation-lab" class="access-card">
          <div class="access-icon">ğŸ”¬</div>
          <h3>ä»¿çœŸå®éªŒå®¤</h3>
          <p>è¿è¡Œå’Œåˆ†æç‰©ç†æ¨¡æ‹Ÿ</p>
        </RouterLink>
        <RouterLink to="/model-library" class="access-card">
          <div class="access-icon">ğŸ“¦</div>
          <h3>æ¨¡å‹åº“</h3>
          <p>æµè§ˆå’Œç®¡ç†3Dæ¨¡å‹èµ„æº</p>
        </RouterLink>
        <RouterLink to="/ai-playground" class="access-card">
          <div class="access-icon">ğŸ§ </div>
          <h3>AIæ¼”æ­¦åœº</h3>
          <p>ä½“éªŒAIä¸3Dç¯å¢ƒäº¤äº’</p>
        </RouterLink>
      </div>
    </div>
  </div>
</template>

<script lang="ts" setup name="Overview">
import { onMounted, ref } from 'vue'
import { RouterLink } from 'vue-router' // å¼•å…¥RouterLinkç±»å‹

// æ ‡ç­¾äº‘æ•°æ® - å±•ç¤ºç³»ç»Ÿç›¸å…³æŠ€æœ¯å’Œç‰¹æ€§
const tags = ref([
  'Three.js',
  'ç‰©ç†å¼•æ“',
  'WebGL',
  'å®æ—¶æ¸²æŸ“',
  '3Då»ºæ¨¡',
  'ç¢°æ’æ£€æµ‹',
  'äººå·¥æ™ºèƒ½',
  'æœºå™¨å­¦ä¹ ',
  'ç²’å­ç³»ç»Ÿ',
  'å…‰å½±è¿½è¸ª',
  'VRæ”¯æŒ',
  'æè´¨ç³»ç»Ÿ',
  'åŠ¨ç”»æ›²çº¿',
  'æµä½“æ¨¡æ‹Ÿ',
  'åˆšä½“åŠ¨åŠ›å­¦',
  'åœºæ™¯ä¼˜åŒ–',
])

const handleScrollDown = () => {
  // 1. ï¼šè¿™é‡Œå®šä¹‰ä¸‹æ»‘ç›®æ ‡å®šä½åˆ°â€œæ ¸å¿ƒç‰¹æ€§åŒºåŸŸâ€
  const targetSection = document.querySelector('.features-section') as HTMLElement;
  if (!targetSection) return; // è‹¥ç›®æ ‡åŒºåŸŸä¸å­˜åœ¨ï¼Œé¿å…æŠ¥é”™
  if (targetSection) {
    // ä½¿ç”¨scrollIntoViewå®ç°å¹³æ»‘æ»šåŠ¨åˆ°ç›®æ ‡åŒºåŸŸ
    targetSection.scrollIntoView({ behavior: 'smooth' });
  }
}

// å®ç°3Dæ ‡ç­¾äº‘æ—‹è½¬æ•ˆæœ
onMounted(() => {
  // æ˜ç¡®æŒ‡å®šä¸ºHTMLElementç±»å‹
  const tagCloud = document.querySelector('.tag-cloud') as HTMLElement | null
  if (!tagCloud) return

  let startX = 0
  let startY = 0
  let isDragging = false
  let currentRotationX = -10
  let currentRotationY = 0

  // è‡ªåŠ¨æ—‹è½¬æ•ˆæœ
  const autoRotate = () => {
    if (!isDragging) {
      currentRotationY += 0.3// è¿™è¡Œæ§åˆ¶æ—‹è½¬é€Ÿåº¦
      tagCloud.style.transform = `rotateX(${currentRotationX}deg) rotateY(${currentRotationY}deg)`
    }
    requestAnimationFrame(autoRotate)
  }

  // é¼ æ ‡äº¤äº’ - æŒ‡å®šä¸ºMouseEventç±»å‹
  tagCloud.addEventListener('mousedown', (e: MouseEvent) => {
    isDragging = true
    startX = e.clientX
    startY = e.clientY
  })

  document.addEventListener('mousemove', (e: MouseEvent) => {
    if (!isDragging) return

    const deltaX = e.clientX - startX
    const deltaY = e.clientY - startY

    currentRotationY += deltaX * 0.5
    currentRotationX -= deltaY * 0.5

    // é™åˆ¶Xè½´æ—‹è½¬è§’åº¦ï¼Œé¿å…è¿‡åº¦ç¿»è½¬
    currentRotationX = Math.max(-30, Math.min(30, currentRotationX))

    tagCloud.style.transform = `rotateX(${currentRotationX}deg) rotateY(${currentRotationY}deg)`

    startX = e.clientX
    startY = e.clientY
  })

  document.addEventListener('mouseup', () => {
    isDragging = false
  })

  document.addEventListener('mouseleave', () => {
    isDragging = false
  })

  // è§¦æ‘¸è®¾å¤‡æ”¯æŒ - æŒ‡å®šä¸ºTouchEventç±»å‹
  tagCloud.addEventListener('touchstart', (e: TouchEvent) => {
    if (e.touches.length === 1) {
      isDragging = true
      startX = e.touches[0].clientX
      startY = e.touches[0].clientY
    }
  })

  document.addEventListener('touchmove', (e: TouchEvent) => {
    if (!isDragging || e.touches.length !== 1) return

    const deltaX = e.touches[0].clientX - startX
    const deltaY = e.touches[0].clientY - startY

    currentRotationY += deltaX * 0.5
    currentRotationX -= deltaY * 0.5

    currentRotationX = Math.max(-30, Math.min(30, currentRotationX))

    tagCloud.style.transform = `rotateX(${currentRotationX}deg) rotateY(${currentRotationY}deg)`

    startX = e.touches[0].clientX
    startY = e.touches[0].clientY
  })

  document.addEventListener('touchend', () => {
    isDragging = false
  })

  autoRotate()
})
</script>

<style scoped>
/* æ ·å¼éƒ¨åˆ†ä¿æŒä¸å˜ */
.overview-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 40px 20px;
  background-color: transparent;
  border-radius: 12px;
  backdrop-filter: none;
}

/* æ ‡é¢˜åŒºåŸŸæ ·å¼ */
.header-section {
  text-align: center;
  margin-bottom: 60px;
  padding: 10px 20px;
  margin-top: 10px;
}

.title {
  font-size: 48px;
  color: #ffd700;
  margin-bottom: 15px;
  letter-spacing: 5px;
  text-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
  animation: fadeIn 1.5s ease-out;
}

.subtitle {
  font-size: 20px;
  color: #f0f0f0;
  opacity: 0.9;
  max-width: 700px;
  margin: 0 auto;
}

/* 3Dæ ‡ç­¾äº‘æ ·å¼ */
.tag-cloud-container {
  width: 100%;
  height: 400px;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 20px 0 80px;
  perspective: 1000px;
}

.tag-cloud {
  position: relative;
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  transition: transform 0.5s ease;
}

.tag {
  position: absolute;
  top: 50%;
  left: 50%;
  padding: 8px 16px;
  background-color: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 215, 0, 0.3);
  border-radius: 20px;
  color: #fff;
  font-size: 14px;
  transform-origin: 0 0;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  backface-visibility: hidden;
}

.tag:hover {
  background-color: rgba(255, 215, 0, 0.8);
  color: #000;
  transform: rotateY(var(--rotation)) translateZ(220px) scale(1.2);
  z-index: 10;
}

/* ç‰¹æ€§åŒºåŸŸæ ·å¼ */
.features-section {
  margin-bottom: 80px;
}

.section-title {
  text-align: center;
  color: #ffd700;
  font-size: 28px;
  margin-bottom: 40px;
  text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 30px;
}

.feature-item {
  background-color: transparent;
  border-radius: 10px;
  padding: 25px;
  display: flex;
  gap: 15px;
  transition:
    transform 0.3s ease,
    box-shadow 0.3s ease;
}

.feature-item:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
}

.feature-item .icon {
  font-size: 32px;
  color: #ffd700;
  min-width: 40px;
  margin-top: 5px;
}

.feature-content h3 {
  color: #fff;
  margin-bottom: 10px;
  font-size: 18px;
}

.feature-content p {
  color: #f0f0f0;
  opacity: 0.8;
  font-size: 14px;
  line-height: 1.6;
}

/* å¿«æ·å…¥å£æ ·å¼ */
.quick-access-section {
  margin-bottom: 40px;
}

.access-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 25px;
}

.access-card {
  background-color: transparent;
  border-radius: 10px;
  padding: 30px 20px;
  text-align: center;
  color: #fff;
  text-decoration: none;
  transition: all 0.3s ease;
  border: 1px solid transparent;
}

.access-card:hover {
  background-color: rgba(255, 215, 0, 0.1);
  border-color: rgba(255, 215, 0, 0.5);
  transform: translateY(-5px) scale(1.02);
}

.access-icon {
  font-size: 40px;
  margin-bottom: 15px;
  color: #ffd700;
}

.access-card h3 {
  margin-bottom: 10px;
  font-size: 18px;
}

.access-card p {
  font-size: 14px;
  opacity: 0.8;
}

/* åŠ¨ç”»æ•ˆæœ */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* å“åº”å¼è°ƒæ•´ */
@media (max-width: 768px) {
  .overview-container {
    padding: 20px 15px;
  }

  .title {
    font-size: 32px;
    letter-spacing: 3px;
  }

  .tag-cloud-container {
    height: 300px;
    margin: 20px 0 50px;
  }

  .tag {
    font-size: 12px;
    padding: 5px 10px;
  }

  .section-title {
    font-size: 24px;
  }

  .features-section,
  .quick-access-section {
    margin-bottom: 50px;
  }
}

@media (max-width: 480px) {
  .features-grid,
  .access-grid {
    grid-template-columns: 1fr;
  }

  .tag-cloud-container {
    height: 250px;
  }
}

.quick-know-btn {
  background-color: transparent;
  backdrop-filter: none;

  /* æ¸…é™¤é»˜è®¤æŒ‰é’®æ ·å¼ï¼Œé¿å…å¹²æ‰° */
  border: 1px solid #ffd700; /* é‡‘è‰²è¾¹æ¡†ï¼ˆå‘¼åº”é¡µé¢ä¸»é¢˜è‰²ï¼‰ */
  color: #ffd700; /* é‡‘è‰²æ–‡å­—ï¼ˆå‘¼åº”æ ‡é¢˜/å›¾æ ‡è‰²ï¼‰ */
  padding: 10px 24px; /* æŒ‰é’®å†…è¾¹è·ï¼Œä¿è¯ç‚¹å‡»åŒºåŸŸ */
  font-size: 16px; /* å­—ä½“å¤§å°ï¼Œä¿è¯å¯è¯»æ€§ */
  border-radius: 30px; /* åœ†è§’ï¼Œæå‡ç¾è§‚åº¦ */
  cursor: pointer; /* é¼ æ ‡æ‚¬æµ®æ˜¾ç¤ºâ€œæ‰‹â€å½¢ï¼Œæç¤ºå¯ç‚¹å‡» */

  /* äº¤äº’åŠ¨æ•ˆï¼šhoveræ—¶è½»å¾®å˜åŒ–ï¼Œæå‡ä½“éªŒ */
  transition: all 0.3s ease;
}
/* æŒ‰é’®hoveræ•ˆæœï¼ˆå¯é€‰ï¼Œå¢å¼ºäº¤äº’æ„Ÿï¼‰ */
.quick-know-btn:hover {
  background-color: rgba(255, 215, 0, 0.1); /* æ·¡é‡‘è‰²èƒŒæ™¯ */
  transform: translateY(-2px); /* è½»å¾®ä¸Šæµ® */
  box-shadow: 0 4px 12px rgba(255, 215, 0, 0.2); /* é‡‘è‰²é˜´å½± */
}
/* æŒ‰é’®ç‚¹å‡»åé¦ˆï¼ˆå¯é€‰ï¼Œå¢å¼ºæ‰‹æ„Ÿï¼‰ */
.quick-know-btn:active {
  transform: translateY(0); /* ç‚¹å‡»åå¤ä½ */
}

</style>
